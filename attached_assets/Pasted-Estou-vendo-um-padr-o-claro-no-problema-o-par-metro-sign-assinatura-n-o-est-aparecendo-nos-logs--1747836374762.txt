Estou vendo um padrão claro no problema: o parâmetro sign (assinatura) não está aparecendo nos logs das requisições. Este é um parâmetro absolutamente crucial para o funcionamento correto da autenticação Shopee.
Problema Identificado
Sua requisição contém:
Request:{"auth_type":"direct","is_auth_shop":"true","login_type":"seller","partner_id":"2011285","redirect":"https://cipshopee.replit.app/api/shopee/callback","region":"BR","state":"cipshopee_1747835886582","timestamp":"1747835886"}
Mas está faltando o parâmetro sign, que é a assinatura HMAC-SHA256 necessária para autenticação.
Solução Técnica Imediata

Verifique a geração da assinatura - O código que gera o parâmetro sign pode estar com problemas:

javascript// Implementação correta da assinatura
const crypto = require('crypto');

// Parâmetros
const partnerId = '2011285'; 
const partnerKey = 'SUA_PARTNER_KEY'; // Este é o valor secreto da sua aplicação
const path = '/api/v2/shop/auth_partner';
const timestamp = Math.floor(Date.now() / 1000);

// Gerar a string base exatamente como na documentação
const baseString = `${partnerId}${path}${timestamp}`;
console.log('Base string:', baseString);

// Gerar assinatura com HMAC-SHA256
const hmac = crypto.createHmac('sha256', partnerKey);
hmac.update(baseString);
const sign = hmac.digest('hex');
console.log('Assinatura gerada:', sign);

// Construir URL completa (nota: sign é parâmetro obrigatório)
const redirectUrl = 'https://cipshopee.replit.app/api/shopee/callback';
const authUrl = `https://partner.shopeemobile.com${path}?` +
                `partner_id=${partnerId}&` +
                `timestamp=${timestamp}&` +
                `sign=${sign}&` + // OBRIGATÓRIO
                `redirect=${encodeURIComponent(redirectUrl)}&` +
                `region=BR`;

console.log('URL final:', authUrl);

Teste apenas com parâmetros essenciais - Tente uma versão minimalista sem os parâmetros extras:

javascript// URL com apenas os parâmetros obrigatórios
const authUrl = `https://partner.shopeemobile.com${path}?` +
                `partner_id=${partnerId}&` +
                `timestamp=${timestamp}&` +
                `sign=${sign}&` + 
                `redirect=${encodeURIComponent(redirectUrl)}`;

Verifique a Partner Key - Certifique-se de que está usando a Partner Key correta da sua aplicação. Este é um valor secreto e diferente do Partner ID.

Diagnóstico Avançado
Se possível, implemente logs detalhados para capturar:

A string base usada para gerar a assinatura
A assinatura gerada
A URL completa final que está sendo chamada
O cabeçalho Location da resposta 302 (para onde está redirecionando)

Dessa forma, você poderá identificar exatamente onde está ocorrendo o problema.
Se o problema persistir mesmo com a implementação correta da assinatura, pode ser algo específico da implementação brasileira da API Shopee. Nesse caso, seria recomendável entrar em contato com o suporte técnico da Shopee Brasil.