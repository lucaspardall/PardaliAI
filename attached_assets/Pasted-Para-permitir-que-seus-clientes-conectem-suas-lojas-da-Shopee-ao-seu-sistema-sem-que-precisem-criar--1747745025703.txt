Para permitir que seus clientes conectem suas lojas da Shopee ao seu sistema sem que precisem criar uma conta na Open Platform, você pode utilizar o fluxo de autenticação OAuth 2.0 fornecido pela Shopee. Esse processo permite que os vendedores autorizem sua aplicação a acessar os dados de suas lojas diretamente.

Passo a Passo para Integração com a Shopee API 2.0
Crie uma Aplicação na Shopee Open Platform:

Acesse o Shopee Open Platform e registre sua aplicação.

Anote o partner_id e o partner_key fornecidos.

Gere o Link de Autorização:

Construa a URL de autorização utilizando os parâmetros necessários:

bash
Copiar
Editar
https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=YOUR_PARTNER_ID&redirect=YOUR_REDIRECT_URI&timestamp=TIMESTAMP&sign=SIGNATURE
Parâmetros:

partner_id: Seu ID de parceiro.

redirect: URL para a qual o usuário será redirecionado após a autorização.

timestamp: Timestamp atual em segundos.

sign: Assinatura HMAC-SHA256 dos parâmetros acima usando seu partner_key.

Exemplo de geração da assinatura em PHP:

php
Copiar
Editar
$partner_id = 'YOUR_PARTNER_ID';
$redirect = 'YOUR_REDIRECT_URI';
$timestamp = time();
$base_string = $partner_id . $redirect . $timestamp;
$sign = hash_hmac('sha256', $base_string, 'YOUR_PARTNER_KEY');
Redirecione o Cliente para o Link de Autorização:

Quando o cliente clicar para conectar sua loja, redirecione-o para a URL gerada no passo anterior.

O cliente será levado à página de login da Shopee para autorizar sua aplicação.

Receba o Código de Autorização:

Após a autorização, a Shopee redirecionará o cliente para o redirect_uri fornecido, anexando os parâmetros code e shop_id na URL:

Copiar
Editar
YOUR_REDIRECT_URI?code=AUTHORIZATION_CODE&shop_id=SHOP_ID
Troque o Código de Autorização por um Access Token:

Faça uma requisição POST para o endpoint de token:

ruby
Copiar
Editar
https://partner.shopeemobile.com/api/v2/auth/token/get
Payload:

json
Copiar
Editar
{
  "code": "AUTHORIZATION_CODE",
  "partner_id": YOUR_PARTNER_ID,
  "shop_id": SHOP_ID,
  "sign": "SIGNATURE",
  "timestamp": TIMESTAMP
}
Nota: A assinatura (sign) aqui deve ser gerada com base nos parâmetros específicos deste endpoint, conforme a documentação da Shopee.

Armazene o Access Token com Segurança:

O access_token recebido permitirá que sua aplicação interaja com a API da Shopee em nome do cliente.

Armazene-o de forma segura e esteja preparado para atualizá-lo quando expirar.

Considerações Finais
Validade da URL de Autorização: A URL gerada para autorização tem validade de 5 minutos. Certifique-se de que o timestamp e a sign estejam sincronizados e atualizados.

Segurança: Nunca exponha seu partner_key no frontend ou em locais acessíveis publicamente.

Documentação Oficial: Para detalhes adicionais e atualizações, consulte a documentação oficial da Shopee Open Platform.